syntax = "proto3";
package mp.pb.link;

import "control/control.proto";

message ControlUplink {
    // Future metadata
    reserved 1 to 8;

    // Separate payloads are used to request a transition to
    // a different control mode than to update the values of
    // the same mode to prevent accidental changes
    oneof payload {
        control.Controls request_transition = 9;
        control.Controls update_controls = 10;
    }
}

message ControlDownlink {
    message Broadcast {
        // Tell the user which control modes are supported
        repeated control.Controls supported_controls = 1;
    }

    message Transition {
        // Current (after) control is used to sync the UI
        // with the new control mode on the vehicle
        control.Controls after    = 1;
        control.Controls before   = 2;
    }

    oneof payload {
        Broadcast broadcast = 1;
        Transition transition = 2;
    }
}