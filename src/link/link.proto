syntax = "proto3";
package mp.pb.link;

import "link/command/command.proto";
import "link/logging/log.proto";
import "link/telemetry/telemetry.proto";

// TODO: Remove vehicle specific telemetry and command
// messages from Telemetry and Command, and define for
// each vehicle <Vehicle>Uplink and <Vehicle>Downlink
// and add to payloads here

// Top-level message wrapper for messages from
// GCS to the vehicle
message UplinkMessage {
    // Uplink message sequence id
    uint32 message_id   = 1;
    // Source (GCS) ID
    uint32 src_id       = 2;
    // Destination (vehicle) ID
    uint32 dest_id      = 3;
    // Session ID (per vehicle), ...
    reserved 4 to 7;

    oneof payload {
        // Input command
        Command command = 8;
        // TODO: Mission upload, subscribe to sensor, set configuration, ...
    }
}

// Top-level message wrapper for messages from
// the vehicle to GCS
message DownlinkMessage {
    // Downlink message sequence id
    uint32 message_id   = 1;
    // Source (vehicle) ID
    uint32 src_id       = 2;
    // Destination (GCS) ID
    uint32 dest_id      = 3;
    // Session ID (per vehicle), ...
    reserved 4 to 7;

    oneof payload {
        Telemetry telemetry = 8;
        Log log             = 9;
    }
}