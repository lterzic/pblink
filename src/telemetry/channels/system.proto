syntax = "proto3";
package mp.pb.telemetry;

import "common/chrono.proto";

message CPUCore {
    // Clock frequency in hertz
    uint32 clock = 1;
    // Temperature in Celsius
    uint32 temp = 2;
    // Cycle counter
    uint64 cycles = 3;
    // Retired instruction counter
    uint64 instret = 4;
    // Core ID of the CPU this system runs on
    uint32 core_id = 100;
}

message Memory {
    // Amount of used memory in bytes
    uint32 usage = 1;
    // Total memory in bytes
    uint32 capacity = 100;
}

message Task {
    // Unique ID
    uint32 id = 1;
    // Task stack usage
    Memory stack = 2;
    // Usage of the global heap
    Memory heap = 3;    
    // Task name
    string name = 100;
}

message Kernel {
    message TaskSwitchIn {
        // Task ID
        uint32 task_id = 1;
        // Switch timestamp
        Timestamp timestamp = 2;
    }
    // Total task switch count
    uint64 switch_count = 1;
    // Task switches since last message
    repeated TaskSwitchIn task_switch_in = 2;
    // Tick rate in Hz
    uint32 tick_rate = 100;
}
